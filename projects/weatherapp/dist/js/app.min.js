!function(e){angular.module("app",["weatherApp","clockApp","geolocation"])}(window),function(e){var n={openWeatherMap:"a0d7e44cdb26abb996246b544a26f161",geonames:"eahenke"};e.apiKeys=n}(window),function(e){angular.module("weatherApp",["geolocation"])}(window),function(e){var n=angular.module("weatherApp");n.controller("WeatherCtrl",["weatherSrvc","geolocationService",function(e,n){function t(){n.getLocation().then(function(e){var n=e.latitude,t=e.longitude;a.searchByCoord(n,t)},function(e){a.searchByCity(a.currentCity)})}function o(e,t){n.getLocalTime(e,t).then(function(e){a.timezone=e},function(e){console.dir(e)})}function r(e){a.currentCity=e.city.name,a.currentWeather=e.description,a.currentTemp=e.temp,a.dayOrNight=e.dayOrNight,a.iconClass=e.iconClass}var a=this;a.currentCity="Chicago",a.timezone="-0600",a.searchByCity=function(n){a.newCity="",e.getWeatherByCity(n).then(function(e){r(e),o(e.city.lat,e.city.lon)},function(e){console.dir(e)})},a.searchByCoord=function(n,t){e.getWeatherByCoord(n,t).then(function(e){r(e),o(n,t)},function(e){console.dir(e)})},t()}])}(window),function(){var e=angular.module("weatherApp");e.directive("weather",function(){return{restricted:"E",scope:{},templateUrl:"js/components/weather/_weather.html"}})}(),function(e){var n=angular.module("weatherApp");n.filter("temperature",function(){return function(e){if(e){e=parseInt(e);var n=Math.round((e-32)*(5/9)),t=e+"°F / "+n+"°C";return t}return""}})}(window),function(e){var n=angular.module("weatherApp");n.factory("weatherSrvc",["$http","$q",function(e,n){function t(t){var a=n.defer(),i={};return e.jsonp(t.url,t).then(function(e){var n=e.data;if(n){if(i.city={name:n.name,lat:n.coord.lat,lon:n.coord.lon},n.weather[0]){i.main=n.weather[0].main,i.description=n.weather[0].description;var t=n.weather[0].icon,c=n.weather[0].id;i.dayOrNight=r(t),i.iconClass=o(c,i.dayOrNight)}n.main&&(i.temp=n.main.temp)}else console.log("no data");a.resolve(i)},function(e){console.dir(e),a.reject(e)}),a.promise}function o(e,n){var t,o=e.toString().charAt(0);if(800==e)t="icon-clear-"+n;else if("8"==o)t="icon-cloud-"+n;else{var r={2:"thunder",3:"rain",5:"rain",6:"snow",7:"mist"};t="icon-"+r[o]}return t}function r(e){var n="";return e&&(n="d"==e.slice(-1)?"day":"night"),n}var a="http://api.openweathermap.org/data/2.5/weather",i=apiKeys.openWeatherMap,c=function(e,n){var o={method:"jsonp",url:a,params:{lat:e,lon:n,units:"imperial",APPID:i,callback:"JSON_CALLBACK"}};return t(o)},u=function(e){var n={method:"jsonp",url:a,params:{q:e,units:"imperial",APPID:i,callback:"JSON_CALLBACK"}};return t(n)};return{getWeatherByCity:u,getWeatherByCoord:c}}])}(window),function(e){angular.module("clockApp",[])}(window),function(e){var n=angular.module("clockApp");n.directive("clock",["$interval","dateFilter",function(e,n){return{restricted:"E",scope:{format:"@?"},link:function(t,o,r){function a(){o.text(n(new Date,t.format,r.timezone))}void 0==t.format&&(t.format="h:mm a");var i;o.on("$destroy",function(){e.cancel(i)}),i=e(function(){a()},1e3),a()}}}])}(window),function(e){angular.module("geolocation",[])}(window),function(e){var n=angular.module("geolocation");n.factory("geolocationService",["$q","$http",function(e,n){function t(e){var n,t,o,r;return e=e.toString(),"-"==e.charAt(0)?(t="-",n=e.slice(1).split(".")):(t="+",n=e.split(".")),o=n[0],r=n[1],r="5"==r?"30":"00",o.length<2&&(o="0"+o),t+o+r}var o=function(){var n=e.defer();return navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){n.resolve(e.coords)},function(e){n.reject(e)}):n.reject(!1),n.promise},r=function(o,r){var a={url:"http://api.geonames.org/timezoneJSON",method:"jsonp",params:{lat:o,lng:r,username:"eahenke",callback:"JSON_CALLBACK"}},i=e.defer();return n.jsonp(a.url,a).then(function(e){var n=e.data.rawOffset,o=t(n);i.resolve(o)},function(e){console.dir(e),i.reject(e)}),i.promise};return{getLocation:o,getLocalTime:r}}])}(window);